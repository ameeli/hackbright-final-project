{% extends 'base.html' %}

{% block title %}{{ fname }}'s Home{% endblock %}

{% block content %}

<div class="top-navbar">
  <div id="portal">{{ fname }}'s Portal</div>
  <div class="links">
    <a href="/preferences">Preferences</a>
    <a href="/logout">Logout</a>
  </div>
</div>

<div class="buttons-container">
    <button class="borderless-button" id="today">Today</button>
    <button class="borderless-button" id="this-week">This Week</button>
    <button class="borderless-button" id="this-month">This Month</button>
    <button class="borderless-button" id="all-time">All Time</button>
</div>

<div class="pie-chart">
  <svg width="450" height="450" id="svg"></svg>
</div>

<div class="graphs">
  <svg width="500" height="500" id="svg1"></svg>
  <svg width="500" height="500" id="svg2"></svg>
</div>

<script src="/static/js/createPieChart.js"></script>
<script src="/static/js/createMwChart.js"></script>
<script src="/static/js/createNotMwChart.js"></script>

<script>
  function passTodayInterval() {
    var interval = 15;
    $.get("/pie-chart.json", {"interval": interval}, createPieChart);
    $.get("/mw_graph_data.json", {"interval": interval}, createMwChart);
    $.get("/not_mw_graph_data.json", {"interval": interval}, createNotMwChart);
  }

  $("#today").on("click", passTodayInterval);

  function passThisWeekInterval() {
    var interval = 40;
    $.get("/pie-chart.json", {"interval": interval}, createPieChart);
    $.get("/mw_graph_data.json", {"interval": interval}, createMwChart);
    $.get("/not_mw_graph_data.json", {"interval": interval}, createNotMwChart);
  }

  $("#this-week").on("click", passThisWeekInterval);

  function passThisMonthInterval() {
    var interval = 80;
    $.get("/pie-chart.json", {"interval": interval}, createPieChart);
    $.get("/mw_graph_data.json", {"interval": interval}, createMwChart);
    $.get("/not_mw_graph_data.json", {"interval": interval}, createNotMwChart);
  }

  $("#this-month").on("click", passThisMonthInterval);

  function passAllTimeInterval() {
    var interval = 112;
    $.get("/pie-chart.json", {"interval": interval}, createPieChart);
    $.get("/mw_graph_data.json", {"interval": interval}, createMwChart);
    $.get("/mw_graph_data.json", {"interval": interval}, createNotMwChart);
  }

  $("#all-time").on("click", passAllTimeInterval);
</script>

{% endblock %}

<!-- loading pie with React
svg width="450" height="450" id="svg"></svg>
<div id="root"></div>
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script src="http://unpkg.com/babel-standalone"></script>
<script src="/static/jsx/charts.jsx" type="text/jsx"></script> -->